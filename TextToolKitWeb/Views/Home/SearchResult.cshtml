@*
    Result of search will go here
*@
<p style="font-size:x-small;color:red">
    <u>Note:</u><br />
    * Letter casing is ignored in search. All will be counted as lower case.
</p>
<br />

<h6><b>Text Entry:</b></h6>

<table class="table table-bordered">
    <tr>
        @if (ViewBag.SearchIndices.Count > 0)
        {
            <td id="result"></td>
        }
        else
        {
            <td>@ViewBag.UserTextEntry</td>
        }
    </tr>
</table>
<br />

<table class="table table-bordered">
    <tr>
        <td style="width:50%">Search Item</td>
        <td>@ViewBag.UserSearchItem</td>
    </tr>
    <tr>
        <td style="width:50%">Number of Occurences</td>
        <td>@ViewBag.SearchIndices.Count</td>
    </tr>
</table>



<style>
    .highlight {
        background-color: yellow;
    }
</style>

<script>
    var userText = '@ViewBag.UserTextEntry';
    var indices = @Json.Serialize(ViewBag.SearchIndices)
    var count = @ViewBag.UserSearchItem.Length;

    let result = indices.reduce((str, start) => {
    str[start] = `<span class="highlight">${str[start]}`;
    str[start + count - 1] = `${str[start + count - 1]}</span>`;
    return str;
    },  userText.split("")).join("");

    document.getElementById("result").innerHTML = result;
</script>
